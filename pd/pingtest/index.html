<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://ibm-mas.github.io/mas-performance/pd/pingtest/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>PingTest Utility - Maximo Application Suite (MAS) Performance Wiki</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "PingTest Utility";
        var mkdocs_page_input_path = "pd/pingtest.md";
        var mkdocs_page_url = "/mas-performance/pd/pingtest/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Maximo Application Suite (MAS) Performance Wiki
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">MAS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Best Practice</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../mas/ocp/bestpractice/">OpenShift Container Platform</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mas/core/bestpractice/">MAS Core</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mas/iot/bestpractice/">MAS IoT</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >MAS Manage</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../mas/manage/bestpractice/">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../mas/mobile/bestpractice/">Mobile</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Integration Framework (MIF)</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../mas/mif-jms/bestpractice/">JMS</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../mas/mif-kafka/bestpractice/">Kafka</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Industry Solutions</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../mas/manage-industry-solutions/ong-hse/bestpractice/">Oil and Gas/HSE</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../mas/manage-industry-solutions/transportation/bestpractice/">Transportation</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Work Order Intelligence (AI)</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../mas/manage/woi-train/">Training</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../mas/manage/woi-infer/">Inferencing</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="" href="https://ibm-maximo-dev.github.io/maximo-autoscript-documentation/bestpractice/overview">Scripting Best Practice</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mas/mvi/bestpractice/">MAS Visual Inspection</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mas/aws/bestpractice/">AWS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mas/ibmcloud/bestpractice/">IBM Cloud</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mas/azure/bestpractice/">Azure</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../mas/mongodb/bestpractice/">MongoDB</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mas/sizing/guidance/">Sizing Guidance</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../mas/monitoring/guidance/">Monitoring</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Maximo 7.x</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../maximo-7/bestpractice/">Best Practice</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Performance Diagnosis</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../ptbp/">Performance Test Best Practice</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../checklist/">Diagnosis Check List</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../db2-performance-diagnosis/">DB2 Performance Diagnosis</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >DBTest Utility</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../dbtest/">MAS Manage</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../dbtest-76/">Maximo 7.6</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">PingTest Utility</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#updating-the-manageworkspace-cr">Updating the ManageWorkspace CR</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#using-the-ping-servlet-utility-to-test-request-timeouts-outside-the-ocp-cluster">Using the Ping servlet utility to test request timeouts outside the OCP cluster</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#using-the-ping-servlet-utility-to-test-request-timeouts-inside-the-ocp-cluster">Using the Ping servlet utility to test request timeouts inside the OCP cluster</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="" href="https://ibm-mas.github.io/mcpi/">IBM Maximo Cluster Performance Insights</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../jvm-performance-insight/">JVM Performance Insight</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="https://github.com/zxue/upgrade-ibm-maximo-to-mas-on-vsphere">Upgrade IBM Maximo to MAS on VMware vSphere - Lessons Learned</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Maximo Application Suite (MAS) Performance Wiki</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Performance Diagnosis</li>
      <li class="breadcrumb-item active">PingTest Utility</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/ibm-mas/mas-performance/blob/master/docs/pd/pingtest.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="ping-test-utility">Ping test Utility<a class="headerlink" href="#ping-test-utility" title="Permanent link"></a></h1>
<p>When trying to diagnose a request timeout problem it is helpful to rule out gateways/load balancers outside the OCP cluster. Sometimes these external
gateways can have short timeouts which are resetting a connection before the request is completed. The Ping test Utility is designed to help
diagnose this issue.  </p>
<div class="admonition info">
<p class="admonition-title"><strong>IMPORTANT</strong></p>
<p>As of this writing the Ping test utility is not part of the base server bundle code and needs to be loaded via a customization archive. 
This means that the ManageWorkspace CR needs to be updated and will require a restart of the server bundles (i.e. it will cause a disruption
while the server bundle pod is restarted).</p>
</div>
<h3 id="updating-the-manageworkspace-cr">Updating the ManageWorkspace CR<a class="headerlink" href="#updating-the-manageworkspace-cr" title="Permanent link"></a></h3>
<ul>
<li>Edit the ManageWorkspace CR in the MAS Manage namespace</li>
</ul>
<p>Single Customization Archive
<div class="highlight"><pre><span></span><code>spec:
  settings:
    customization:
      customizationArchive: https://ibm.box.com/shared/static/oj9z062b7x8hcywndnv6n57gya7e1ypz.zip
</code></pre></div></p>
<p>In case you already have a customization archive add to the <code>customizationList</code>
<div class="highlight"><pre><span></span><code>spec:
  settings:
    customizationList:
    - customizationArchiveName: archiveAlias1
      customizationArchiveUrl: https://ibm.box.com/shared/static/oj9z062b7x8hcywndnv6n57gya7e1ypz.zip
</code></pre></div></p>
<ul>
<li>Wait for the MAS Manage workspace operator to update the server bundle pods with the Ping servlet class and restart the server bundle pods</li>
</ul>
<h3 id="using-the-ping-servlet-utility-to-test-request-timeouts-outside-the-ocp-cluster">Using the Ping servlet utility to test request timeouts outside the OCP cluster<a class="headerlink" href="#using-the-ping-servlet-utility-to-test-request-timeouts-outside-the-ocp-cluster" title="Permanent link"></a></h3>
<ul>
<li>Run the following curl command outside the OCP cluster using the external hostname of the MAS Manage server bundle pod.  The command below will send
  a request to the Ping servlet which will wait for 1 second before responding.  If a response is returned it means no timeout occurred.</li>
</ul>
<div class="highlight"><pre><span></span><code>$ curl https://tenant1.manage.masperf4.ibmmas.com/maximo/ping?timeout=1
{&quot;thread wait time&quot;:&quot;1 seconds&quot;,&quot;status&quot;:&quot;ok&quot;}
$
</code></pre></div>
<ul>
<li>Change the timeout value to match the timeout that you are observing in problematic request.  For example, the Ping request below sets a timeout of 300
  seconds. If no response is received it means the request timed out and the same request should be attempted from inside the OCP cluster using the private 
  IP address of the server bundle pod (see <code>Using the Ping servlet utility to test request timeouts inside the OCP cluster</code> below).</li>
</ul>
<div class="highlight"><pre><span></span><code>$ curl https://tenant1.manage.masperf4.ibmmas.com/maximo/ping?timeout=300
</code></pre></div>
<h3 id="using-the-ping-servlet-utility-to-test-request-timeouts-inside-the-ocp-cluster">Using the Ping servlet utility to test request timeouts inside the OCP cluster<a class="headerlink" href="#using-the-ping-servlet-utility-to-test-request-timeouts-inside-the-ocp-cluster" title="Permanent link"></a></h3>
<ul>
<li>Obtain the internal Cluster IP address of the MAS Manage UI service.</li>
<li>Go to maxinst pod in the MAS Manage namespace -&gt; terminal tab, then execute below commands:</li>
</ul>
<div class="highlight"><pre><span></span><code>$ curl --insecure https://172.30.237.166:443/maximo/ping?timeout=300
{&quot;thread wait time&quot;:&quot;300 seconds&quot;,&quot;status&quot;:&quot;ok&quot;}
$
</code></pre></div>
<p>If you receive a response from the request issued to the internal Cluster IP address of the MAS Manage UI service, but do not receive a response issued externally from outside the cluster, it could be the case that an external gateway service or load balancer is closing the connection due to a shorter timeout set on the gateway. Check is a network administrator.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ibm-mas/mas-performance" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../dbtest-76/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../jvm-performance-insight/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
